FROM alpine:edge

ARG BUILD_DATE
ARG VCS_REF
ARG VERSION

LABEL \
org.label-schema.schema-version=1.0 \
org.label-schema.name=mauzr \
org.label-schema.vcs-url=https://github.com/eqrx/mauzr \
org.label-schema.vcs-ref=$VCS_REF \
org.label-schema.version=$VERSION \
net.eqrx.mauzr.version=$VERSION \
net.eqrx.mauzr.vcs-ref=$VCS_REF

RUN apk add --no-cache python3 py3-yaml
COPY . /opt/mauzr
RUN pip3 --no-cache install -U -e /opt/mauzr && pip3 install --no-cache mauzr[esp]
